<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd"
 xmlns:p="http://www.springframework.org/schema/p">
 
<bean id="homepagechain" class="com.gcl.http.HttpRequestChain" scope="prototype">
	<property name="requestList">
	  <list>
	   <!-- <ref bean="getOneOrder" /> -->
	   <ref bean="homepage" />
	   <ref bean="login" />
	   <!-- <ref bean="rightFrame" />
	   <ref bean="rightFrameForm" />
	   <ref bean="verify" />
	   <ref bean="clickNext" />
	   <ref bean="orderList" />
	   <ref bean="order" /> -->
	  </list>
	</property>
</bean>

<bean id="loginHandler" class="com.gcl.webimpl.LoginRequest" >
	<property name="recImage">
		<ref bean="recFromFile" />
	</property>
</bean>
<!-- <bean id="clickNextHandler" class="com.webimpl.driveorder.ClickNextRequest" >
	<property name="recImage">
		<ref bean="recFromFile" />
	</property>
</bean>
<bean id="orderHandler" class="com.webimpl.driveorder.OrderRequest">
	<property name="savePath" value="D:/data/车管所网站/orderResult"/>
</bean>

<bean id="getOneOrder" class="com.gcl.http.BasicHttpRequest" p:method="GET" scope="prototype">
	<property name="requestUrl" value="http://120.25.241.101/DriveOrder/getOneOrder.do"/>
	<property name="paraMap">
	   <map>
	   		<entry key="state" value="01"/>
	   </map>
	</property>
	<property name="afterHandler">
		<bean class="com.webimpl.ordermanage.IDRequest"/>
	</property>
</bean> -->
<bean id="homepage" class="com.gcl.http.BasicHttpRequest" p:method="GET" scope="prototype">
	<property name="requestUrl" value="http://www.scjj.gov.cn:8638/index/user/login.aspx"/>
	<property name="afterHandler">
		<bean class="com.gcl.webimpl.HomepageRequest"/>
	</property>
	<property name="subChain">
		<bean class="com.gcl.http.HttpRequestChain">
			<property name="requestList">
			  <list>
			   <ref bean="verify" />
			  </list>
			</property>
		</bean>
	</property>
</bean>
<bean id="recFromFile" class="com.gcl.webimpl.RecFromFile" scope="prototype"/>
<!-- <bean id="imgRec" class="com.imgrec.ImgRec" scope="prototype">
	<property name="username" value="drive0610"/>
	<property name="password" value="lcg0610"/>
	<property name="typeid" value="3040"/>
	<property name="softid" value="40321"/>
	<property name="softkey" value="bd2e250084a140488f370003ecdf9b20"/>
	<property name="recUrl" value="http://api.ruokuai.com/create.json"/>
</bean> -->
<bean id="verify" class="com.gcl.http.BasicHttpRequest" p:method="GET" scope="prototype">
	<property name="requestUrl" value="http://www.scjj.gov.cn:8638/index/indexBitmap.aspx"/>
	<property name="headers">
		<map>
			<entry key="User-Agent" value="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240"/>
			<entry key="Referer" value="http://www.scjj.gov.cn:8638/index/user/login.aspx"/>
		</map>
	</property>
	<property name="paraMap">
		<map>
			<entry key="flagPassword" value="java.lang.Math.random()"/>
		</map>
	</property>
</bean>
<bean id="login" class="com.gcl.http.BasicHttpRequest" p:method="POST" scope="prototype">
	<property name="requestUrl" value="http://www.scjj.gov.cn:8638/index/user/login.aspx"/>
	<property name="headers">
		<map>
			<entry key="User-Agent" value="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240"/>
			<entry key="Referer" value="http://www.scjj.gov.cn:8638/index/user/login.aspx"/>
			<entry key="Accept" value="text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"/>
			<entry key="Accept-Language" value="zh-CN,zh;q=0.8"/>
			<entry key="Accept-Encoding" value="identity"/>
			<entry key="Cache-Control" value="max-age=0"/>
			<entry key="Origin" value="http://www.scjj.gov.cn:8638"/>
		</map>
	</property>
	<property name="paraMap">
	   <map>
	   		<entry key="btnLogin" value="登  录"/>
	   		<!-- <entry key="txtUserName" value="com.webimpl.driveorder.LoginRequest.getTxtUserName(.)"/>
	   		<entry key="txtPwd" value="com.webimpl.driveorder.LoginRequest.getTxtPwd(.)"/> -->
	   </map>
	</property>
	<property name="beforeHandler">
		<ref bean="loginHandler" />
	</property>
	<property name="afterHandler">
		<ref bean="loginHandler" />
	</property>
	
</bean>
<!-- <bean id="rightFrame" class="com.gcl.http.BasicHttpRequest" p:method="GET" scope="prototype">
	<property name="headers">
		<map>
			<entry key="User-Agent" value="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240"/>
		</map>
	</property>
	<property name="beforeHandler">
		<bean class="com.webimpl.driveorder.RightFrameRequest" />
	</property>
	<property name="afterHandler">
		<bean class="com.webimpl.driveorder.RightFrameRequest" />
	</property>
</bean>

<bean id="rightFrameForm" class="com.gcl.http.BasicHttpRequest" scope="prototype">
	<property name="headers">
		<map>
			<entry key="User-Agent" value="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240"/>
		</map>
	</property>
	<property name="paraMap">
	   <map>
	   		<entry key="__EVENTTARGET" value="lnkPost"/>
	   		<entry key="hiTime" value="0"/>
	   </map>
	</property>
	<property name="beforeHandler">
		<bean class="com.webimpl.driveorder.RightFrameFormRequest" />
	</property>
</bean>

<bean id="clickNext" class="com.gcl.http.BasicHttpRequest" scope="prototype">
	<property name="headers">
		<map>
			<entry key="User-Agent" value="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240"/>
		</map>
	</property>
	<property name="paraMap">
	   <map>
	   		<entry key="__EVENTARGUMENT" value=""/>
	   		<entry key="hiTime" value="0"/>
	   		<entry key="__EVENTTARGET" value=""/>
	   		<entry key="btnNext" value="下一步"/>
	   </map>
	</property>
	<property name="beforeHandler">
		<ref bean="clickNextHandler" />
	</property>
</bean>
<bean id="orderList" class="com.gcl.http.BasicHttpRequest" scope="prototype">
	<property name="beforeHandler">
		<bean class="com.webimpl.driveorder.OrderListRequest" />
	</property>
	<property name="afterHandler">
		<bean class="com.webimpl.driveorder.OrderListRequest" />
	</property>
</bean>
<bean id="order" class="com.gcl.http.BasicHttpRequest" scope="prototype">
	<property name="beforeHandler">
		<ref bean="orderHandler" />
	</property>
	<property name="afterHandler">
		<ref bean="orderHandler" />
	</property>
</bean>

<bean id="props" class="com.common.Props" scope="singleton">
<property name="propMap">
	<map>
		<entry key="runTimeRegex" value="^(?i)((mon)|(tue)|(wed)|(thu)|(fri)) \w{3} \d{2} \d{2}:\d{2}:\d{2} \w{3} 2015$"/>
		<entry key="batchFilePath" value="D:\data\车管所网站\tmpImage\"></entry>
		<entry key="timer.delay" value="10" />
		<entry key="timer.schedule" value="1200" />
	</map>
</property>
</bean> -->
</beans>